"use strict";(self.webpackChunksaasus_platform_document=self.webpackChunksaasus_platform_document||[]).push([[6978],{28453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>l});var a=t(96540);const i={},r=a.createContext(i);function s(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),a.createElement(r.Provider,{value:e},n.children)}},38295:(n,e,t)=>{t.d(e,{A:()=>a});const a=t.p+"assets/images/tenant-e7d902523e9377c62cd6755b35e92531.png"},58244:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>u,default:()=>g,frontMatter:()=>c,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"usecase/about-saas-user-accounts/create-tenant","title":"\u30c6\u30ca\u30f3\u30c8\u306e\u4f5c\u6210","description":"\u30bb\u30eb\u30d5\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u304c\u3067\u304d\u305f\u3089\u3001\u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/version-1.11/usecase/about-saas-user-accounts/create-tenant.mdx","sourceDirName":"usecase/about-saas-user-accounts","slug":"/usecase/about-saas-user-accounts/create-tenant","permalink":"/ja/docs/usecase/about-saas-user-accounts/create-tenant","draft":false,"unlisted":false,"tags":[],"version":"1.11","frontMatter":{"title":"\u30c6\u30ca\u30f3\u30c8\u306e\u4f5c\u6210","slug":"create-tenant","excerpt":"","hidden":false,"createdAt":"Wed Nov 01 2023 06:48:33 GMT+0000 (Coordinated Universal Time)","updatedAt":"Thu Dec 21 2023 22:58:57 GMT+0000 (Coordinated Universal Time)"},"sidebar":"guideSidebar","previous":{"title":"SaaS\u5229\u7528\u8005\uff08\u30e6\u30fc\u30b6\u30fc\uff09\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3064\u3044\u3066","permalink":"/ja/docs/usecase/about-saas-user-accounts"},"next":{"title":"\u30c6\u30ca\u30f3\u30c8\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u7d10\u3065\u3051\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b","permalink":"/ja/docs/usecase/about-saas-user-accounts/add-tenant-user"}}');var i=t(74848),r=t(28453),s=t(65537),l=t(79329);const c={title:"\u30c6\u30ca\u30f3\u30c8\u306e\u4f5c\u6210",slug:"create-tenant",excerpt:"",hidden:!1,createdAt:"Wed Nov 01 2023 06:48:33 GMT+0000 (Coordinated Universal Time)",updatedAt:"Thu Dec 21 2023 22:58:57 GMT+0000 (Coordinated Universal Time)"},u=void 0,o={},p=[];function d(n){const e={code:"code",img:"img",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u30bb\u30eb\u30d5\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u304c\u3067\u304d\u305f\u3089\u3001\u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u4eca\u56de\u306f\u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\u6642\u306f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u4f5c\u6210\u3057\u305f",(0,i.jsx)("a",{href:"/docs/tutorial/manage-rate-plans/setting-measurement-units-function-menus-and-price-plans#free-plan",target:"_blank",children:"Free\u30d7\u30e9\u30f3"}),"\u3092\u81ea\u52d5\u3067\u9069\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsx)(l.A,{value:"php",label:"PHP",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-php",children:"    // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u6e08\u307f\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n    $validated = $request->validated();\n\n    // SaaSusSDK\u306e\u5229\u7528\n    $client = new ApiClient();\n    $authClient = $this->client->getAuthClient();\n    $pricingClient = $this->client->getPricingClient();\n\n    // \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n    $pricingPlans = $pricingClient->getPricingPlans();\n    $nextPlanId = \"\";\n    foreach ($pricingPlans->getPricingPlans() as $pricingPlan) {\n        if ($pricingPlan['display_name'] == 'Free\u30d7\u30e9\u30f3') {\n            $nextPlanId = $pricingPlan['id'];\n        }\n    }\n\n    // \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n    if (empty($nextPlanId)) {\n        return response()->json(['detail' => '\u30d7\u30e9\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'], Response::HTTP_INTERNAL_SERVER_ERROR);\n    }\n\n    // \u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\n    // \u30c6\u30ca\u30f3\u30c8\u540d\uff1a\u753b\u9762\u3067\u5165\u529b\u3055\u308c\u305f\u540d\u524d\n    // \u30d0\u30c3\u30af\u30aa\u30d5\u30a3\u30b9\u30b9\u30bf\u30c3\u30d5email\uff1a\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n    $tenant = $authClient->createTenant((object)array(\n        'name' => $tenantName,\n        'back_office_staff_email' => $email,\n    ));\n\n    // \u4f5c\u6210\u3057\u305f\u30c6\u30ca\u30f3\u30c8\u306eID\u3092\u53d6\u5f97\n    $tenantId = $tenant->getId();\n\n    // \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\n    $currentTimeWith5MinutesAfterUnixTime = Carbon::now('UTC')->addMinutes(5)->timestamp;\n\n    // \u30d7\u30e9\u30f3\u60c5\u5831\u3092\u66f4\u65b0\n    $authClient->updateTenantPlan($tenantId, (object)array(\n        'next_plan_id' => $nextPlanId,\n        'using_next_plan_from' => $currentTimeWith5MinutesAfterUnixTime,\n    ));\n"})})}),(0,i.jsx)(l.A,{value:"nodejs",label:"Node.js",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"    // \u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n    const { tenantName, userAttributeValues }: SelfSignUpRequest = request.body;\n    if (!tenantName) {\n    return response.status(400).send({ message: 'Missing required fields' });\n    }\n\n    const userInfo = request.userInfo\n    if (userInfo === undefined) {\n    return response.status(400).json({ detail: 'No user' })\n    }\n\n    // \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n    const pricingClient = new PricingClient()\n    const pricingPlans = (await pricingClient.pricingPlansApi.getPricingPlans()).data.pricing_plans\n    let nextPlanId = \"\"\n    for (const pricingPlan of pricingPlans) {\n        if (pricingPlan.display_name === \"Free\u30d7\u30e9\u30f3\") {\n            nextPlanId = pricingPlan.id;\n        }\n    }\n\n    // \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n    if (!nextPlanId) {\n        return response.status(400).send({ message: '\u30d7\u30e9\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002' });\n    }\n\n    // \u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\n    // \u30c6\u30ca\u30f3\u30c8\u540d\uff1a\u753b\u9762\u3067\u5165\u529b\u3055\u308c\u305f\u540d\u524d\n    // \u30d0\u30c3\u30af\u30aa\u30d5\u30a3\u30b9\u30b9\u30bf\u30c3\u30d5email\uff1a\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n    const tenantProps: TenantProps = {\n        name: tenantName,\n        attributes: [],\n        back_office_staff_email: userInfo.email\n    }\n\n    // \u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\n    const client = new AuthClient()\n    const createdTenant = (await client.tenantApi.createTenant(tenantProps)).data\n\n    // \u4f5c\u6210\u3057\u305f\u30c6\u30ca\u30f3\u30c8\u306eID\u3092\u53d6\u5f97\n    const tenantId = createdTenant.id\n\n    // \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\n    const currentTimeWith5MinutesAfterUnixTime = dayjs().add(5, 'minute').unix()\n    const planReservation: PlanReservation = {\n        next_plan_id: nextPlanId,\n        using_next_plan_from: currentTimeWith5MinutesAfterUnixTime\n    }\n\n    // \u30d7\u30e9\u30f3\u60c5\u5831\u3092\u66f4\u65b0\n    await client.tenantApi.updateTenantPlan(tenantId, planReservation)\n"})})}),(0,i.jsx)(l.A,{value:"go",label:"Go",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'\t// \u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n\tvar request SelfSignupRequest\n\ttenantName := request.TenantName\n\tuserAttributeValues := request.UserAttributeValues\n\n\t// \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n\tpricingPlans, err := pricingClient.GetPricingPlansWithResponse(context.Background())\n\tvar nextPlanId string\n\tif pricingPlans.JSON200 != nil {\n\t\tfor _, pricingPlan := range pricingPlans.JSON200.PricingPlans {\n\t\t\tif pricingPlan.DisplayName == "Free\u30d7\u30e9\u30f3" {\n\t\t\t\tnextPlanId = pricingPlan.Id\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\t// \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n\tif nextPlanId == "" {\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{"error": "\u30d7\u30e9\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"})\n\t}\n\n\t// \u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\n\ttenantProps := authapi.CreateTenantParam{\n\t\tName:                 tenantName,\n\t\tBackOfficeStaffEmail: userInfo.Email,\n\t}\n\n\ttenantResp, err := authClient.CreateTenantWithResponse(context.Background(), tenantProps)\n\tif err != nil {\n\t\tc.Logger().Errorf("Failed to create tenant: %v", err)\n\t\treturn c.JSON(http.StatusInternalServerError, echo.Map{"error": "Failed to create tenant"})\n\t}\n\n\ttenantID := tenantResp.JSON201.Id\n\n\t// \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\n\tcurrentTimeWith5MinutesAfterUnixTime := time.Now().Add(5 * time.Minute).Unix()\n\n\t// int64 \u2192 int \u306b\u5909\u63db\n\tusingNextPlanFrom := int(currentTimeWith5MinutesAfterUnixTime)\n\n\tplanReservation := authapi.PlanReservation{\n\t\tNextPlanId:        &nextPlanId,\n\t\tNextPlanTaxRateId: nil,\n\t\tUsingNextPlanFrom: &usingNextPlanFrom,\n\t}\n\n\tauthClient.UpdateTenantPlan(context.Background(), tenantID, planReservation)\n'})})}),(0,i.jsx)(l.A,{value:"python",label:"Python",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'    # \u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n    tenant_name = request.tenantName\n    user_attribute_values = request.userAttributeValues\n\n    try:\n        # \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n        pricing_plan_api = PricingPlansApi(api_client=pricing_api_client)\n        pricing_plans = pricing_plan_api.get_pricing_plans().to_dict()\n        next_plan_id = ""\n        for pricing_plan in pricing_plans["pricing_plans"]:\n            if pricing_plan["display_name"] == "Free\u30d7\u30e9\u30f3":\n                next_plan_id = pricing_plan["id"]\n\n        # \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n        if not next_plan_id:\n            raise HTTPException(status_code=500, detail="\u30d7\u30e9\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")\n\n        # \u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\n        # \u30c6\u30ca\u30f3\u30c8\u540d\uff1a\u753b\u9762\u3067\u5165\u529b\u3055\u308c\u305f\u540d\u524d\n        # \u30d0\u30c3\u30af\u30aa\u30d5\u30a3\u30b9\u30b9\u30bf\u30c3\u30d5email\uff1a\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n        tenant_props = TenantProps(\n            name=tenant_name,\n            attributes={},\n            back_office_staff_email=auth_user.email\n        )\n\n        # \u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\n        tenant_api = TenantApi(api_client=api_client)\n        created_tenant = tenant_api.create_tenant(body=tenant_props)\n\n        # \u4f5c\u6210\u3057\u305f\u30c6\u30ca\u30f3\u30c8\u306eID\u3092\u53d6\u5f97\n        tenant_id = created_tenant.id\n\n        # JST (\u65e5\u672c\u6a19\u6e96\u6642) \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u53d6\u5f97\n        jst = pytz.timezone(\'Asia/Tokyo\')\n\n        # \u73fe\u5728\u306e\u30ed\u30fc\u30ab\u30eb\u6642\u523b\uff08JST\uff09\u3092\u53d6\u5f97\n        local_time = datetime.now(jst)\n\n        # \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\uff08JST\uff09\n        current_time_with_5_minutes_after_unix_time = int((local_time + timedelta(minutes=5)).timestamp())\n        plan_reservation = PlanReservation(\n            next_plan_id = next_plan_id,\n            using_next_plan_from = current_time_with_5_minutes_after_unix_time\n        )\n\n        # \u30d7\u30e9\u30f3\u60c5\u5831\u3092\u66f4\u65b0\n        TenantApi(api_client=api_client).update_tenant_plan(\n            tenant_id=tenant_id,\n            body=plan_reservation\n        )\n'})})}),(0,i.jsx)(l.A,{value:"java",label:"Java",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'        // \u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n        String tenantName = (String) requestBody.get("tenantName");\n        Map<String, Object> userAttributeValues = requestBody.get("userAttributeValues") != null\n                ? (Map<String, Object>) requestBody.get("userAttributeValues")\n                : new HashMap<>();\n\n        AuthApiClient apiClient = new Configuration().getAuthApiClient();\n        apiClient.setReferer(request.getHeader("Referer"));\n        UserInfoApi userInfoApi = new UserInfoApi(apiClient);\n        UserInfo userInfo = userInfoApi.getUserInfo(getIDToken(request));\n\n        if (userInfo.getTenants() != null && !userInfo.getTenants().isEmpty()) {\n            System.err.println("User is already associated with a tenant");\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, "User is already associated with a tenant");\n        }\n\n        // \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n        PricingApiClient pricingApiClient = new Configuration().getPricingApiClient();\n        pricingApiClient.setReferer(request.getHeader("Referer"));\n        PricingPlansApi pricingPlansApi = new PricingPlansApi(pricingApiClient);\n        PricingPlans pricingPlans = null;\n        pricingPlans = pricingPlansApi.getPricingPlans();\n        String nextPlanId = "";\n        for (PricingPlan pricingPlan : pricingPlans.getPricingPlans()) {\n            if ("Free\u30d7\u30e9\u30f3".equals(pricingPlan.getDisplayName())) {\n                nextPlanId = pricingPlan.getId();\n                break;\n            }\n        }\n\n        // \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n        if (nextPlanId == null || nextPlanId.isEmpty()) {\n            return ResponseEntity\n                .status(HttpStatus.HTTP_INTERNAL_SERVER_ERROR)\n                .body("\u30d7\u30e9\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002");\n        }\n\n        TenantApi tenantApi = new TenantApi(apiClient);\n\n        // \u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\n        // \u30c6\u30ca\u30f3\u30c8\u540d\uff1a\u753b\u9762\u3067\u5165\u529b\u3055\u308c\u305f\u540d\u524d\n        // \u30d0\u30c3\u30af\u30aa\u30d5\u30a3\u30b9\u30b9\u30bf\u30c3\u30d5email\uff1a\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n        TenantProps tenantProps = new TenantProps()\n                .name(tenantName)\n                .backOfficeStaffEmail(userInfo.getEmail());\n        \n        // \u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\n        Tenant createdTenant = tenantApi.createTenant(tenantProps);\n\n        // \u4f5c\u6210\u3057\u305f\u30c6\u30ca\u30f3\u30c8\u306eID\u3092\u53d6\u5f97\n        String tenantId = createdTenant.getId();\n\n        // \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\n        long currentTimeWith5MinutesAfterUnixTime = Instant.now()\n            .plus(5, ChronoUnit.MINUTES)\n            .getEpochSecond();\n\n        PlanReservation planReservation = new PlanReservation()\n                .nextPlanId(nextPlanId)\n                .usingNextPlanFrom((int) currentTimeWith5MinutesAfterUnixTime);\n\n        // \u30d7\u30e9\u30f3\u60c5\u5831\u3092\u66f4\u65b0\n        tenantApi.updateTenantPlan(tenantId, planReservation);\n'})})}),(0,i.jsx)(l.A,{value:"csharp",label:"C#(.Net8)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",children:'        // \u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n        string tenantName = requestBody.TenantName;\n        var userAttributeValues = requestBody.UserAttributeValues ?? new Dictionary<string, object>();\n\n        // \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n        var pricingClientConfig = CreateClientConfiguration(c => c.GetPricingApiClientConfig(), context);\n        var pricingPlansApi = new PricingPlansApi(pricingClientConfig);\n        var pricingPlans = pricingPlansApi.GetPricingPlans();\n        string nextPlanId = "";\n        foreach (var pricingPlan in pricingPlans.VarPricingPlans)\n        {\n            if (pricingPlan.DisplayName == "Free\u30d7\u30e9\u30f3")\n            {\n                nextPlanId = pricingPlan.Id;\n                break;\n            }\n        }\n\n        // \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n        if (string.IsNullOrEmpty(nextPlanId))\n        {\n            Results.Problem(detail: "\u30d7\u30e9\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002", statusCode: 500);\n        }\n\n        // \u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\n        // \u30c6\u30ca\u30f3\u30c8\u540d\uff1a\u753b\u9762\u3067\u5165\u529b\u3055\u308c\u305f\u540d\u524d\n        // \u30d0\u30c3\u30af\u30aa\u30d5\u30a3\u30b9\u30b9\u30bf\u30c3\u30d5email\uff1a\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n        var tenantApi = new TenantApi(authApiClientConfig);\n        var tenantProps = new TenantProps(\n            name: tenantName,\n            attributes: new Dictionary<string, object>(),\n            backOfficeStaffEmail: userInfo.Email\n        );\n\n        // \u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\n        var createdTenant = await tenantApi.CreateTenantAsync(tenantProps);\n\n        // \u4f5c\u6210\u3057\u305f\u30c6\u30ca\u30f3\u30c8\u306eID\u3092\u53d6\u5f97\n        var tenantId = createdTenant.Id;\n\n        // \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\n        var currentTimeWith5MinutesAfterUnixTime = DateTimeOffset.UtcNow.AddMinutes(5).ToUnixTimeSeconds();\n        var planReservation = new PlanReservation\n        {\n            NextPlanId = nextPlanId,\n            UsingNextPlanFrom = (int)currentTimeWith5MinutesAfterUnixTime\n        };\n\n        // \u30d7\u30e9\u30f3\u60c5\u5831\u3092\u66f4\u65b0\n        tenantApi.UpdateTenantPlan(tenantId, planReservation);\n'})})}),(0,i.jsx)(l.A,{value:"csharp(.Netfw4.8)",label:"C#(.Netfw4.8)",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",children:'        // \u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n        string tenantName = request.TenantName;\n        var userAttributeValues = request.UserAttributeValues ?? new Dictionary<string, object>();\n        \n        // \u6599\u91d1\u30d7\u30e9\u30f3\u3092\u691c\u7d22\n        var pricingApiClientConfig = CreateClientConfiguration(c => c.GetPricingApiClientConfig());\n        var pricingPlansApi = new PricingPlansApi(pricingApiClientConfig);\n        pricingapi.Model.PricingPlans pricingPlans = await pricingPlansApi.GetPricingPlansAsync();\n        string nextPlanId = "";\n        foreach (var pricingPlan in pricingPlans.VarPricingPlans)\n        {\n            if (pricingPlan.DisplayName == "Free\u30d7\u30e9\u30f3")\n            {\n                nextPlanId = pricingPlan.Id;\n                break;\n            }\n        }\n\n        // \u30d7\u30e9\u30f3\u306eid\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u30a8\u30e9\u30fc\u3068\u3059\u308b\n        if (string.IsNullOrEmpty(nextPlanId))\n        {\n            return InternalServerError();\n        }\n\n        // \u30c6\u30ca\u30f3\u30c8\u4f5c\u6210\n        // \u30c6\u30ca\u30f3\u30c8\u540d\uff1a\u753b\u9762\u3067\u5165\u529b\u3055\u308c\u305f\u540d\u524d\n        // \u30d0\u30c3\u30af\u30aa\u30d5\u30a3\u30b9\u30b9\u30bf\u30c3\u30d5email\uff1a\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n        var tenantApi = new TenantApi(authApiClientConfig);\n        var tenantProps = new TenantProps(\n            name: tenantName,\n            attributes: new Dictionary<string, object>(),\n            backOfficeStaffEmail: userInfo.Email\n        );\n\n        // \u30c6\u30ca\u30f3\u30c8\u3092\u4f5c\u6210\n        var createdTenant = await tenantApi.CreateTenantAsync(tenantProps);\n\n        // \u4f5c\u6210\u3057\u305f\u30c6\u30ca\u30f3\u30c8\u306eID\u3092\u53d6\u5f97\n        var tenantId = createdTenant.Id;\n\n        // \u30d7\u30e9\u30f3\u5909\u66f4\u6642\u306b\u73fe\u5728\u306e\u6642\u523b\u304b\u30895\u5206\u4ee5\u4e0a\u672a\u6765\u306e\u6642\u9593\u3092\u6307\u5b9a\n        var currentTimeWith5MinutesAfterUnixTime = new DateTimeOffset(DateTime.UtcNow.AddMinutes(5)).ToUnixTimeSeconds();\n        var planReservation = new PlanReservation(\n            nextPlanId: nextPlanId,\n            usingNextPlanFrom: (int)currentTimeWith5MinutesAfterUnixTime\n        );\n\n        // \u30d7\u30e9\u30f3\u60c5\u5831\u3092\u66f4\u65b0\n        tenantApi.UpdateTenantPlan(tenantId, planReservation);\n'})})})]}),"\n",(0,i.jsx)(e.p,{children:"API\u3092\u5229\u7528\u3057\u3066\u30c6\u30ca\u30f3\u30c8\u304c\u6b63\u5e38\u306b\u4f5c\u6210\u3067\u304d\u305f\u304b\u306e\u78ba\u8a8d\u306f\u3001\u300cSaaSus\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\uff1eSaaS \u904b\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\uff1e\u30c6\u30ca\u30f3\u30c8\u7ba1\u7406\u300d\u3088\u308a\u3054\u78ba\u8a8d\u9802\u3051\u307e\u3059\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"tenant",src:t(38295).A+"",width:"1920",height:"429"})})]})}function g(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},65537:(n,e,t)=>{t.d(e,{A:()=>_});var a=t(96540),i=t(34164),r=t(65627),s=t(56347),l=t(50372),c=t(30604),u=t(11861),o=t(78749);function p(n){return a.Children.toArray(n).filter((n=>"\n"!==n)).map((n=>{if(!n||(0,a.isValidElement)(n)&&function(n){const{props:e}=n;return!!e&&"object"==typeof e&&"value"in e}(n))return n;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(n){const{values:e,children:t}=n;return(0,a.useMemo)((()=>{const n=e??function(n){return p(n).map((n=>{let{props:{value:e,label:t,attributes:a,default:i}}=n;return{value:e,label:t,attributes:a,default:i}}))}(t);return function(n){const e=(0,u.XI)(n,((n,e)=>n.value===e.value));if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map((n=>n.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(n),n}),[e,t])}function g(n){let{value:e,tabValues:t}=n;return t.some((n=>n.value===e))}function m(n){let{queryString:e=!1,groupId:t}=n;const i=(0,s.W6)(),r=function(n){let{queryString:e=!1,groupId:t}=n;if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(r),(0,a.useCallback)((n=>{if(!r)return;const e=new URLSearchParams(i.location.search);e.set(r,n),i.replace({...i.location,search:e.toString()})}),[r,i])]}function f(n){const{defaultValue:e,queryString:t=!1,groupId:i}=n,r=d(n),[s,c]=(0,a.useState)((()=>function(n){let{defaultValue:e,tabValues:t}=n;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((n=>n.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find((n=>n.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:e,tabValues:r}))),[u,p]=m({queryString:t,groupId:i}),[f,P]=function(n){let{groupId:e}=n;const t=function(n){return n?`docusaurus.tab.${n}`:null}(e),[i,r]=(0,o.Dv)(t);return[i,(0,a.useCallback)((n=>{t&&r.set(n)}),[t,r])]}({groupId:i}),h=(()=>{const n=u??f;return g({value:n,tabValues:r})?n:null})();(0,l.A)((()=>{h&&c(h)}),[h]);return{selectedValue:s,selectValue:(0,a.useCallback)((n=>{if(!g({value:n,tabValues:r}))throw new Error(`Can't select invalid tab value=${n}`);c(n),p(n),P(n)}),[p,P,r]),tabValues:r}}var P=t(9136);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(74848);function b(n){let{className:e,block:t,selectedValue:a,selectValue:s,tabValues:l}=n;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,r.a_)(),o=n=>{const e=n.currentTarget,t=c.indexOf(e),i=l[t].value;i!==a&&(u(e),s(i))},p=n=>{let e=null;switch(n.key){case"Enter":o(n);break;case"ArrowRight":{const t=c.indexOf(n.currentTarget)+1;e=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(n.currentTarget)-1;e=c[t]??c[c.length-1];break}}e?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:l.map((n=>{let{value:e,label:t,attributes:r}=n;return(0,x.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:n=>{c.push(n)},onKeyDown:p,onClick:o,...r,className:(0,i.A)("tabs__item",h.tabItem,r?.className,{"tabs__item--active":a===e}),children:t??e},e)}))})}function v(n){let{lazy:e,children:t,selectedValue:r}=n;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const n=s.find((n=>n.props.value===r));return n?(0,a.cloneElement)(n,{className:(0,i.A)("margin-top--md",n.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((n,e)=>(0,a.cloneElement)(n,{key:e,hidden:n.props.value!==r})))})}function A(n){const e=f(n);return(0,x.jsxs)("div",{className:(0,i.A)("tabs-container",h.tabList),children:[(0,x.jsx)(b,{...e,...n}),(0,x.jsx)(v,{...e,...n})]})}function _(n){const e=(0,P.A)();return(0,x.jsx)(A,{...n,children:p(n.children)},String(e))}},79329:(n,e,t)=>{t.d(e,{A:()=>s});t(96540);var a=t(34164);const i={tabItem:"tabItem_Ymn6"};var r=t(74848);function s(n){let{children:e,hidden:t,className:s}=n;return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,s),hidden:t,children:e})}}}]);