"use strict";(self.webpackChunksaasus_platform_document=self.webpackChunksaasus_platform_document||[]).push([[2781],{70968:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var s=i(74848),t=i(28453);const r={title:"\u8a2d\u5b9a\u624b\u9806",slug:"manual",excerpt:"",hidden:!1,createdAt:"Thu Oct 07 2024 19:00:00 GMT+0000 (Coordinated Universal Time)",updatedAt:"Thu Oct 07 2024 19:00:00 GMT+0000 (Coordinated Universal Time)"},a=void 0,l={id:"api-gateway-function/manual",title:"\u8a2d\u5b9a\u624b\u9806",description:"API Gateway \u5229\u7528\u624b\u9806",source:"@site/i18n/ja/docusaurus-plugin-content-docs/version-1.11/api-gateway-function/manual.md",sourceDirName:"api-gateway-function",slug:"/api-gateway-function/manual",permalink:"/ja/docs/api-gateway-function/manual",draft:!1,unlisted:!1,tags:[],version:"1.11",frontMatter:{title:"\u8a2d\u5b9a\u624b\u9806",slug:"manual",excerpt:"",hidden:!1,createdAt:"Thu Oct 07 2024 19:00:00 GMT+0000 (Coordinated Universal Time)",updatedAt:"Thu Oct 07 2024 19:00:00 GMT+0000 (Coordinated Universal Time)"},sidebar:"guideSidebar",previous:{title:"API Gateway \u6a5f\u80fd",permalink:"/ja/docs/api-gateway-function/overview"}},c={},d=[{value:"API Gateway \u5229\u7528\u624b\u9806",id:"api-gateway-\u5229\u7528\u624b\u9806",level:2},{value:"Step 1: \u5229\u7528\u7533\u8acb",id:"step-1-\u5229\u7528\u7533\u8acb",level:3},{value:"Step 2: \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3078\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a",id:"step-2-\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3078\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a",level:3},{value:"Step 3: API Server \u306e\u8d77\u52d5\u8a2d\u5b9a",id:"step-3-api-server-\u306e\u8d77\u52d5\u8a2d\u5b9a",level:3},{value:"Step 4: \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7d71\u5408\u3068\u5727\u7e2e",id:"step-4-\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7d71\u5408\u3068\u5727\u7e2e",level:3},{value:"Step 5: ZIP \u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",id:"step-5-zip-\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",level:3},{value:"Step 6: \u6a29\u9650\u306e\u8a2d\u5b9a",id:"step-6-\u6a29\u9650\u306e\u8a2d\u5b9a",level:3},{value:"Step 7: API \u306e\u516c\u958b\u3068\u30a2\u30af\u30bb\u30b9",id:"step-7-api-\u306e\u516c\u958b\u3068\u30a2\u30af\u30bb\u30b9",level:3},{value:"API \u30a2\u30af\u30bb\u30b9\u65b9\u6cd5",id:"api-\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5",level:4},{value:"\u30a2\u30af\u30bb\u30b9\u4f8b",id:"\u30a2\u30af\u30bb\u30b9\u4f8b",level:4},{value:"Example",id:"example",level:4}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"api-gateway-\u5229\u7528\u624b\u9806",children:"API Gateway \u5229\u7528\u624b\u9806"}),"\n",(0,s.jsx)(n.p,{children:"SaaSus Platform \u306e API Gateway \u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u3001API \u3092\u7c21\u5358\u306b\u516c\u958b\u30fb\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u624b\u9806\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-1-\u5229\u7528\u7533\u8acb",children:"Step 1: \u5229\u7528\u7533\u8acb"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://docs.google.com/forms/d/e/1FAIpQLSftCXrCOH-19uoVyaziajuRSdvwCzdlteqK5xLxjvYs3Lz7Ww/viewform",children:"API Gateway \u6a5f\u80fd \u03b2 \u7248\u5229\u7528\u7533\u8acb\u30d5\u30a9\u30fc\u30e0"})})," \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u5229\u7528\u7533\u8acb\u3092\u884c\u3044\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-2-\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3078\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a",children:"Step 2: \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3078\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u516c\u958b\u5bfe\u8c61\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3001API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-3-api-server-\u306e\u8d77\u52d5\u8a2d\u5b9a",children:"Step 3: API Server \u306e\u8d77\u52d5\u8a2d\u5b9a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u6642\u306b ",(0,s.jsx)(n.code,{children:"saasus-sdk"})," \u306e API \u30b5\u30fc\u30d0\u30fc\u304c\u8d77\u52d5\u3059\u308b\u3088\u3046\u3001\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092 ",(0,s.jsx)(n.code,{children:"ServletInitializer"})," \u30af\u30e9\u30b9\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"import saasus.sdk.util.apiserver.ApiServer;\n\n/**\n * PetClinic Spring Boot Application.\n *\n * @author Dave Syer\n *\n */\n@SpringBootApplication\n@ImportRuntimeHints(PetClinicRuntimeHints.class)\npublic class PetClinicApplication {\n\n\tpublic static void main(String[] args) {\n\n\t\ttry {\n\t\t\tApiServer.start(8083);\n\t\t}\n\t\tcatch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t\tSystem.exit(1);\n\t\t}\n\n\t\tSpringApplication.run(PetClinicApplication.class, args);\n\t}\n\n}\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Application Load Balancer"})," \u306b\u5bfe\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30ea\u30b9\u30ca\u30fc"}),": \u30dd\u30fc\u30c8 ",(0,s.jsx)(n.strong,{children:"8083"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7"}),": \u30dd\u30fc\u30c8 ",(0,s.jsx)(n.strong,{children:"8083"})," \u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7"}),": ALB \u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30dd\u30fc\u30c8 ",(0,s.jsx)(n.strong,{children:"8083"})," \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-4-\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7d71\u5408\u3068\u5727\u7e2e",children:"Step 4: \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7d71\u5408\u3068\u5727\u7e2e"}),"\n",(0,s.jsx)(n.p,{children:"\u5bfe\u8c61\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u307e\u3068\u3081\u3001ZIP \u30d5\u30a1\u30a4\u30eb\u306b\u5727\u7e2e\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\n# Usage: $0 <directory>\n\nDIRECTORY=$1\nOUTPUT_FILE="generated_file_name.txt"\n\nif [ -f "$OUTPUT_FILE" ]; then\n    rm "$OUTPUT_FILE"\nfi\n\nfind "$DIRECTORY" -type f -name "*.java" -print0 | while IFS= read -r -d \'\' file; do\n    echo "===== $file =====" >> "$OUTPUT_FILE"\n    cat "$file" >> "$OUTPUT_FILE"\n    echo -e "\\n" >> "$OUTPUT_FILE"\ndone\n\nZIP_FILE="generated_file_name.zip"\nif [ -f "$ZIP_FILE" ]; then\n    rm "$ZIP_FILE"\nfi\n\nzip "$ZIP_FILE" "$OUTPUT_FILE"\necho "All Java files have been merged and zipped into $ZIP_FILE"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u65b9\u6cd5"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ bash merge_java_files.sh <\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30b9>\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ bash merge_java_files.sh src/main/java/org/springframework/samples/petclinic\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-5-zip-\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",children:"Step 5: ZIP \u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"}),"\n",(0,s.jsxs)(n.p,{children:["\u958b\u767a\u30b3\u30f3\u30bd\u30fc\u30eb\u306e ",(0,s.jsx)(n.strong,{children:"API Gateway \u6a5f\u80fd\u306e\u753b\u9762"}),"\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u751f\u6210\u3057\u305f ZIP \u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-6-\u6a29\u9650\u306e\u8a2d\u5b9a",children:"Step 6: \u6a29\u9650\u306e\u8a2d\u5b9a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Permission \u30bf\u30d6"}),"\u306b\u79fb\u52d5\u3057\u3001",(0,s.jsx)(n.strong,{children:"Assume Role \u7528\u306e CloudFormation"})," \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4f5c\u6210\u3057\u305f ",(0,s.jsx)(n.strong,{children:"Role ARN"})," \u3068 ",(0,s.jsx)(n.strong,{children:"External ID"})," \u3092\u767b\u9332\u3057\u307e\u3059\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["PrivateLink(Network Load Balancer)\u3092\u4f5c\u6210\u3059\u308b VPC \u306e ",(0,s.jsx)(n.strong,{children:"VPC ID"})," \u3068 ",(0,s.jsx)(n.strong,{children:"Subnet IDs"})," \u3092\u767b\u9332\u3057\u307e\u3059\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["Application Load Balancer \u306e ",(0,s.jsx)(n.strong,{children:"ALB ARN"})," \u3092\u767b\u9332\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001SaaSus \u3068\u304a\u5ba2\u69d8\u306e\u74b0\u5883\u3092\u63a5\u7d9a\u3059\u308b\u30a4\u30f3\u30d5\u30e9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"step-7-api-\u306e\u516c\u958b\u3068\u30a2\u30af\u30bb\u30b9",children:"Step 7: API \u306e\u516c\u958b\u3068\u30a2\u30af\u30bb\u30b9"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"API \u3092\u516c\u958b\u3057\u3001\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"api-\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5",children:"API \u30a2\u30af\u30bb\u30b9\u65b9\u6cd5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["API \u306e\u30a2\u30af\u30bb\u30b9\u306b\u306f ",(0,s.jsx)(n.strong,{children:"API Key"})," \u304c\u5fc5\u8981\u3067\u3059\u3002\u904b\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u306e ",(0,s.jsx)(n.strong,{children:"\u30c6\u30ca\u30f3\u30c8\u7ba1\u7406\u753b\u9762"}),"\u3067 API Key \u3092\u767a\u884c\u3057\u3001\u30a2\u30af\u30bb\u30b9\u306b\u5229\u7528\u3057\u307e\u3059\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u03b2 \u7248\u306e\u305f\u3081\u3001\u30a2\u30af\u30bb\u30b9\u306b\u5fc5\u8981\u306a\u30c9\u30e1\u30a4\u30f3\u60c5\u5831\u306f SaaSus \u904b\u55b6\u5074\u304b\u3089\u30e1\u30fc\u30eb\u306b\u3066\u9001\u4ed8\u3055\u308c\u307e\u3059\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u30a2\u30af\u30bb\u30b9\u4f8b",children:"\u30a2\u30af\u30bb\u30b9\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ curl -v -X GET https://<\u30c9\u30e1\u30a4\u30f3>/<\u30af\u30e9\u30b9\u306e\u30d5\u30eb\u30d1\u30b9>/<\u30e1\u30bd\u30c3\u30c9\u540d> -H 'x-api-key:<\u767a\u884c\u3057\u305fAPI Key>' -H 'tenantId:<\u53d6\u5f97\u3057\u305f tenantId>'\n"})}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ curl -v -X GET https://xxxxxxxxxxxxxxxxxxxxx/org.springframework.samples.petclinic.owner.FindFormApi/processFindFormApi -H 'x-api-key:azydsktcf1b93Mmjxuex7CEbEoV7OjrGk0RIqgzCQtc' -H 'tenantId:dc38a950-5203-4820-a325-418c0764ec69'\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var s=i(96540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);