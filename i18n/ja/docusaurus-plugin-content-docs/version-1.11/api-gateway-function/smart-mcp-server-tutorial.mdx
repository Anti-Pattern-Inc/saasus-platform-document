---
title: "Smart MCP Server チュートリアル"
slug: "smart-mcp-server-tutorial"
excerpt: ""
hidden: false
createdAt: "Sun May 26 2025 07:00:00 GMT+0000 (Coordinated Universal Time)"
updatedAt: "Sun May 26 2025 07:00:00 GMT+0000 (Coordinated Universal Time)"
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";


このチュートリアルでは、Smart API Gateway機能で公開したAPIを、AIエージェント体験サービスが利用できるMCPサーバーとして公開する手順を説明します。

### 前提条件

このチュートリアルを開始する前に、以下が完了していることを確認してください：

- [Smart API Gateway機能](./manual.mdx)でAPIが公開済みであること
- SaaSus Platform開発コンソールへのアクセス権限があること

:::info
Smart MCP Server機能は、Smart API Gateway機能で公開されたAPIを自動的にMCPサーバーとして提供します。<br/>
まだSmart API Gateway機能を設定していない場合は、先に[設定手順](./manual.mdx)を完了してください。
:::

---

## Step 1: SaaSus Platform開発コンソールにアクセス

1. [SaaSus Platform開発コンソール](https://settings.console.saasus.io/dashboard)にログインします。
2. 左側のメニューから **Smart API Gateway** を選択します。
3. APIが公開されている状態であることを確認します。

![smart-mcp-server-tutorial-1](/ja/img/api-gateway-function/smart-mcp-server-tutorial-1.png)

---

## Step 2: MCPサーバーエンドポイントの確認

Smart API Gateway機能でAPIが正常に公開されると、以下の情報が表示されますので控えてください。

- **MCPサーバーエンドポイント**: AIエージェント体験サービスが接続するためのエンドポイント

![smart-mcp-server-tutorial-2](/ja/img/api-gateway-function/smart-mcp-server-tutorial-2.png)

---

## Step 3: APIキーの確認

SaaS運用コンソール→ユーザー管理の画面から、特定のユーザーのAction列のAPIキー管理ボタンを押下後
ダイアログでAPIキーが表示されますので控えてください。（もし未発行の場合は、新しく発行してください）

![smart-mcp-server-tutorial-3](/ja/img/api-gateway-function/smart-mcp-server-tutorial-3.png)

## Step 4: OpenAI Playgroundの利用準備

:::warning 重要な注意事項
OpenAI Playgroundの利用には**有償のOpenAIアカウント**が必要です。無料アカウントでは利用できません。<br/>
また、API呼び出しごとに利用料金が発生しますので、予算設定等の適切な管理を行ってください。
:::

### OpenAIアカウントの準備

このステップでは、OpenAI Playgroundを利用するための前提条件を確認し、必要なアカウント設定を行います。

#### 1. OpenAIアカウントの作成・ログイン

1. [OpenAI](https://openai.com/) にアクセスします
2. 「Sign up」または「Log in」からアカウントを作成・ログインします
3. 電話番号認証などの必要な認証手続きを完了します

#### 2. 支払い方法の設定（必須）

:::danger 重要
OpenAI Playgroundを利用するには、支払い方法の設定が**必須**です。
:::

1. OpenAI Platform（[platform.openai.com](https://platform.openai.com/)）にログインします
2. 右上のアカウントメニューから「Billing」を選択します
3. 「Payment methods」で有効なクレジットカードを追加します
4. 必要に応じて使用制限（Usage limits）を設定します

#### 3. APIクレジットの確認

1. Billingページで現在のクレジット残高を確認します
2. 残高が不足している場合は、適切な金額をチャージします
3. 月次使用制限を設定して予期しない高額請求を防ぎます

#### 4. OpenAI Playgroundへのアクセス確認

1. [OpenAI Playground](https://platform.openai.com/playground) にアクセスします
2. チャット画面が正常に表示されることを確認します
3. 簡単なメッセージを送信してAPIが利用可能であることを確認します

:::tip
- 使用制限を適切に設定して予算を管理しましょう
- テスト時は少ないトークン数で動作確認を行いましょう
- 不要になったMCP Serverは削除してコストを抑えましょう
:::

---

## Step 5: AIエージェント体験サービスでの接続テスト

:::info
現時点では、OpenAI Playgroundでの接続テストのみサポートしております。
:::

<Tabs>
<TabItem value="openai-playground" label="OpenAI Playground" default>

1. [OpenAI Playground](https://platform.openai.com/playground) にアクセスします
2. **Tools** セクションで **Create...** をクリックします
3. **MCP Server** を選択します
  ![smart-mcp-server-tutorial-4](/ja/img/api-gateway-function/smart-mcp-server-tutorial-4.png)
4. **Add New** を選択します
  ![smart-mcp-server-tutorial-5](/ja/img/api-gateway-function/smart-mcp-server-tutorial-5.png)
5. 表示されたフォームにそれぞれ値を入力します
  - **URL** : 控えておいた**MCPサーバーエンドポイント**
  - **Label** : 任意のラベル
  - **Authentication** : 控えておいた**APIキー**
  ![smart-mcp-server-tutorial-6](/ja/img/api-gateway-function/smart-mcp-server-tutorial-6.png)
7. **Connect**を押下します
8. 成功するとToolsに利用可能なAPI一覧が表示されます。
　![smart-mcp-server-tutorial-7](/ja/img/api-gateway-function/smart-mcp-server-tutorial-7.png)
9. **Add**を押下します
10. **Tools** セクションに追加したMCP Serverが表示されていることを確認します
　![smart-mcp-server-tutorial-8](/ja/img/api-gateway-function/smart-mcp-server-tutorial-8.png)

</TabItem>
</Tabs>

---

## Step 6: AIエージェント体験サービスからのAPI呼び出しテスト

<Tabs>
<TabItem value="openai-playground" label="OpenAI Playground" default>

1. チャットで、「**MCP Server名**を利用して、**APIエンドポイント**を呼び出して」と入力する
2. 返答を待ち「Approve」が表示されたら、それを押下します
3. 返答を待ち、APIが問題なく呼び出されているか確認します

</TabItem>
</Tabs>


## Step 7: エラーのトラブルシューティング

### よくある問題と解決方法

#### 1. MCPサーバーに接続できない

**症状**: AIエージェント体験サービスがMCPサーバーに接続できない

**解決方法**:
- API Keyが正しく設定されているか確認
- ネットワーク接続を確認

#### 2. API呼び出しが失敗する

**症状**: MCPサーバー経由でのAPI呼び出しがエラーになる

**解決方法**:
- Smart API Gateway で直接APIが正常に動作するか確認
- API Keyの権限設定を確認
- スロットリング制限に達していないか確認

#### 3. ツールが表示されない

**症状**: AIエージェント体験サービスでツールの一覧が表示されない

**解決方法**:
- Smart API Gateway でAPIが正常に公開されているか確認
- ブラウザのキャッシュをクリアしてから再試行

---

## まとめ

このチュートリアルでは、Smart MCP Server機能を使用してAPIをAIエージェント体験サービス向けに公開する方法を学習しました。

### 完了した内容

- Smart MCP Server機能の有効化
- MCPサーバーエンドポイントの確認
- AIエージェント体験サービス（OpenAI Playground）での接続設定
- API呼び出しのテスト

:::info
Smart MCP Server機能に関するご質問やサポートが必要な場合は、[サポート申請フォーム](https://forms.gle/XhFD9fCQv1zVGyRT9)からお問い合わせください。
:::