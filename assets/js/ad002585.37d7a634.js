"use strict";(self.webpackChunksaasus_platform_document=self.webpackChunksaasus_platform_document||[]).push([[1454],{7013:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-15-5cac8b68e4cc4605fa266545e608a244.png"},22346:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-12-d4412958384f9685ffc28ff23af71bf7.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var a=n(96540);const s={},i=a.createContext(s);function r(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:t},e.children)}},35738:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-01-fced658c65dd1a673f1c5ff159fb921a.png"},43207:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-04-ad3fba23fd50a5e28f48477efc67afb0.png"},51070:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-05-ceb5acd434a45a60537617c7f0328dbe.png"},58642:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-09-0cfaf8616c077668875c1b3c3866b190.png"},59783:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"part-4/integrate-with-amazon-eventbridge","title":"Integrate with Amazon EventBridge","description":"SaaSus Platform is integrated with Amazon EventBridge. Various events that occur on the SaaSus Platform can be sent to Amazon EventBridge in the SaaS-side AWS account as a partner event source. By leveraging this, SaaS can be built with an event-driven architecture that works in conjunction with SaaSus Platform.","source":"@site/versioned_docs/version-1.11/part-4/integrate-with-amazon-eventbridge.md","sourceDirName":"part-4","slug":"/part-4/integrate-with-amazon-eventbridge","permalink":"/docs/part-4/integrate-with-amazon-eventbridge","draft":false,"unlisted":false,"tags":[],"version":"1.11","frontMatter":{"title":"Integrate with Amazon EventBridge","slug":"integrate-with-amazon-eventbridge","excerpt":"","hidden":false,"metadata":{"image":[],"robots":"index"},"createdAt":"Sun Jan 22 2023 11:54:20 GMT+0000 (Coordinated Universal Time)","updatedAt":"Sun Apr 02 2023 10:07:18 GMT+0000 (Coordinated Universal Time)"},"sidebar":"docsSidebar","previous":{"title":"Setup Procedure","permalink":"/docs/part-4/smart-api-gateway-features/manual"},"next":{"title":"Event Samples","permalink":"/docs/part-4/integrate-with-amazon-eventbridge/event-sample"}}');var s=n(74848),i=n(28453);const r={title:"Integrate with Amazon EventBridge",slug:"integrate-with-amazon-eventbridge",excerpt:"",hidden:!1,metadata:{image:[],robots:"index"},createdAt:"Sun Jan 22 2023 11:54:20 GMT+0000 (Coordinated Universal Time)",updatedAt:"Sun Apr 02 2023 10:07:18 GMT+0000 (Coordinated Universal Time)"},o=void 0,c={},d=[{value:"How to integrate with Amazon EventBridge",id:"how-to-integrate-with-amazon-eventbridge",level:2}];function h(e){const t={a:"a",br:"br",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"SaaSus Platform is integrated with Amazon EventBridge. Various events that occur on the SaaSus Platform can be sent to Amazon EventBridge in the SaaS-side AWS account as a partner event source. By leveraging this, SaaS can be built with an event-driven architecture that works in conjunction with SaaSus Platform."}),"\n",(0,s.jsxs)(t.p,{children:["For example, it can be used to trigger a tenant onboarding process when a SaaS tenant is created, or to trigger the deletion of accompanying data when a user is deleted. Currently, you can retrieve events for all SaaSus APIs. Please check ",(0,s.jsx)(t.a,{href:"/docs/reference/getting-started-with-your-api",children:"API Reference"})," for the contents of each API."]}),"\n",(0,s.jsx)(t.h2,{id:"how-to-integrate-with-amazon-eventbridge",children:"How to integrate with Amazon EventBridge"}),"\n",(0,s.jsxs)(t.p,{children:["Open the ",(0,s.jsx)(t.a,{href:"https://settings.console.saasus.io/integrations/event",children:"Event Integration Page of the SaaS Development Console"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"01",src:n(35738).A+"",width:"1274",height:"938"})}),"\n",(0,s.jsx)(t.p,{children:"In the AWS Account ID section, enter the AWS account ID (the 12-digit ID of the AWS account on which the SaaS is built) to which the event is sent. Also, select the AWS region where you would like to receive notifications. Then press the Save button."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"02",src:n(95633).A+"",width:"1274",height:"938"})}),"\n",(0,s.jsxs)(t.p,{children:["A partner event path will be created on the AWS account configured above. After logging into the relevant AWS account, open the ",(0,s.jsx)(t.a,{href:"https://ap-northeast-1.console.aws.amazon.com/events/home#/partners",children:"Amazon EventBridge Partner Event Source Console"})," and verify that the Partner Event Source has been created."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"03",src:n(63592).A+"",width:"2790",height:"870"})}),"\n",(0,s.jsx)(t.p,{children:'Select the created partner event source and "Associate with event bus". It will then be available for use on the Event Bus just like any other event source.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"04",src:n(43207).A+"",width:"1828",height:"1086"})}),"\n",(0,s.jsxs)(t.p,{children:["Next, let's try sending an event. Open the ",(0,s.jsx)(t.a,{href:"https://ap-northeast-1.console.aws.amazon.com/events/home#/rules",children:"Amazon EventBridge Bus Rules page"}),". On this screen, you should be able to select the partner event source from earlier as an event bus."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"05",src:n(51070).A+"",width:"2786",height:"1090"})}),"\n",(0,s.jsxs)(t.p,{children:["Create rules based on this event bus. Let's set it up as shown in the following page.",(0,s.jsx)(t.br,{}),"\n","First, select the SaaSus Platform event bus and click Create rule. On each page, try to enter the information referring to the following page."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"06",src:n(87797).A+"",width:"2788",height:"1096"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"07",src:n(76172).A+"",width:"2354",height:"1618"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"08",src:n(80187).A+"",width:"2284",height:"1430"})}),"\n",(0,s.jsx)(t.p,{children:'In the event pattern section, first describe the following pattern to get all SaaSus Platform events. Click on the "Edit pattern" button and enter the following JSON directly.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"09",src:n(58642).A+"",width:"1674",height:"1020"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"10",src:n(98616).A+"",width:"1678",height:"1294"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "source": [{\n    "prefix": "aws.partner/saasus.io"\n  }]\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"In this case, all events are retrieved, but you can filter events to retrieve only those for specific API calls."}),"\n",(0,s.jsx)(t.p,{children:"In this case, let's output all events to CloudWatch Logs to see what kind of events are delivered."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"11",src:n(71329).A+"",width:"2314",height:"1652"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"12",src:n(22346).A+"",width:"2318",height:"930"})}),"\n",(0,s.jsx)(t.p,{children:"After all settings are complete, click Create rule and confirm that the rule has been created."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"13",src:n(73107).A+"",width:"1884",height:"1758"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"14",src:n(89500).A+"",width:"2798",height:"1240"})}),"\n",(0,s.jsx)(t.p,{children:"Now that we are ready to link events. Send a test event by returning to the SaaS Development Console and clicking the Send Test button."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"15",src:n(7013).A+"",width:"2860",height:"1252"})}),"\n",(0,s.jsx)(t.p,{children:"If the event arrives successfully, the event should be recorded in CloudWatch Logs. Let's check."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"16",src:n(88238).A+"",width:"2830",height:"1426"})}),"\n",(0,s.jsx)(t.p,{children:"We are now able to retrieve events in this manner."}),"\n",(0,s.jsx)(t.p,{children:"In this case, we linked to CloudWatch Logs, but it is possible to link events to various targets such as Lambda and other APIs. This allows us to apply an event-driven architecture, separating where the SaaSus API was called from and when it was called, and what should be done as a result and when."}),"\n",(0,s.jsx)(t.p,{children:'The "detail" entry contains a "trace_id". This is the same as the one specified at the time of the SaaSus API request or the one generated automatically, so you can trace which API call caused the event.'})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},63592:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-03-a55c14541a2c71935dc360f3ead24bc8.png"},71329:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-11-d456d2567b4ff4f6f2cd72de24f8bee2.png"},73107:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-13-3d3113aa6a0f2da1cf857ec65c4c528c.png"},76172:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-07-92b378f9ba2df297cc42ab032d99e601.png"},80187:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-08-95b31d51813536bad543d10105c7a820.png"},87797:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-06-51e0af6e8073d3276f59f3c39e60cc62.png"},88238:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-16-6103db65504c11278ac9c197b13f3447.png"},89500:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-14-126b4325efd33477de6244f8bc89528a.png"},95633:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-02-4bcdd393919e8872bb57cddd20ffcee3.png"},98616:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/image-10-b6adcadbc9a182d21069794a517f0b0a.png"}}]);